(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(16),o=n.n(c),a=n(3),r=n(2),s=n(4),u=n.n(s),i="/api/persons",j=function(){return u.a.get(i)},l=function(e){return u.a.post(i,e)},b=function(e,t){return u.a.put("".concat(i,"/").concat(e),t)},d=function(e){return u.a.delete("".concat(i,"/").concat(e))},m=n(0),h=function(e){var t=e.contacts,n=e.setGetcontacts,c=Object(r.useState)(""),o=Object(a.a)(c,2),s=o[0],u=o[1],i=Object(r.useState)(""),j=Object(a.a)(i,2),d=j[0],h=j[1],f=Object(r.useState)(""),O=Object(a.a)(f,2),v=O[0],p=O[1],w=Object(r.useState)(""),N=Object(a.a)(w,2),C=N[0],S=N[1];return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"PhoneBook 1.0.0"}),Object(m.jsx)("br",{}),Object(m.jsx)(g,{handleSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s)){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){console.log(t);var c=t.filter((function(e){return e.name===s}))[0];console.log(c),b(c.id,{name:c.name,number:d,id:c.id}).then((function(e){p("Changed ".concat(s,"'s number to ").concat(d)),setTimeout((function(){n((function(e){return!e}))}),e.length>0),setTimeout((function(){p("")}),2e3)}))}}else 0===s.length||0===d.length?window.alert("Fields can not be empty!"):l({name:s,number:d}).then((function(e){p("Added: ".concat(s)),setTimeout((function(){n((function(e){return!e}))}),e.length>0),setTimeout((function(){p("")}),2e3)})).catch((function(e){console.log(e.resp.data)}));u(""),h("")},newName:s,handleName:function(e){return u(e.target.value)||console.log(e.target.value)},newNumber:d,handleNumber:function(e){return h(e.target.value)||console.log(e.target.value)},message:v,messageError:C}),Object(m.jsx)("br",{}),Object(m.jsx)(x,{data:t,setMessage:p,setMessageError:S,setGetcontacts:n})]})},f=function(e){var t=e.message;return t.length>0?Object(m.jsx)("div",{className:"msg",children:t}):Object(m.jsx)(m.Fragment,{})},O=function(e){var t=e.message;return t.length>0?Object(m.jsx)("div",{className:"msgError",children:t}):Object(m.jsx)(m.Fragment,{})},g=function(e){var t=e.handleSubmit,n=e.newName,c=e.handleName,o=e.newNumber,a=e.handleNumber,r=e.message,s=e.messageError;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{message:s}),Object(m.jsx)(f,{message:r}),Object(m.jsx)("h3",{children:"Add new contact:"}),Object(m.jsxs)("form",{onSubmit:t,children:[Object(m.jsxs)("div",{children:["Name: ",Object(m.jsx)("input",{value:n,onChange:c})]}),Object(m.jsxs)("div",{children:["Number: ",Object(m.jsx)("input",{value:o,onChange:a})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})]})},x=function(e){var t=e.data,n=e.setMessage,c=e.setMessageError,o=e.setGetcontacts,s=Object(r.useState)(""),u=Object(a.a)(s,2),i=u[0],j=u[1],l=t.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())||e.number.toLowerCase().includes(i.toLowerCase())}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:"Contacts:"}),Object(m.jsxs)("div",{children:["Filter: ",Object(m.jsx)("input",{value:i,onChange:function(e){return j(e.target.value)||console.log(e.target.value)}})]})]}),Object(m.jsx)("br",{}),Object(m.jsx)("div",{children:l.map((function(e){return Object(m.jsxs)("div",{children:[e.name,": ",e.number," |",Object(m.jsx)("button",{value:e,onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&d(e.id).then((function(t){console.log("Deleted!"),n("Removed ".concat(e.name)),setTimeout((function(){o((function(e){return!e}))}),t.length>0)})).catch((function(t){console.log("ERROR!"),c("Information of ".concat(e.name," has already been removed from the server!")),setTimeout((function(){o((function(e){return!e}))}),t.length>0)})),setTimeout((function(){c(""),n("")}),2e3)}(e)},children:"Delete"})]},e.name)}))})]})},v=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),s=Object(a.a)(o,2),u=s[0],i=s[1];return Object(r.useEffect)((function(){j().then((function(e){c(e.data)}))}),[u]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(h,{contacts:n,setGetcontacts:i})})};n(40);o.a.render(Object(m.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4be4995b.chunk.js.map